<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>3-Digit Random Number Generator</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            /* Additional styles for the odometer effect */
            .digit-roll {
                transition-timing-function: cubic-bezier(0.1, 0.7, 0.1, 1);
            }

            .digit {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* Add a subtle border between digits */
            .digit-container {
                border: 1px solid #d1d5db;
            }

            /* Button loading state */
            button:disabled {
                opacity: 0.7;
                cursor: not-allowed;
            }
        </style>
    </head>
    <body class="bg-gray-100 min-h-screen flex items-center justify-center">
        <div class="container mx-auto p-4">
            <div
                class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6"
            >
                <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">
                    Random Number Generator
                </h1>

                <div class="odometer-container flex justify-center mb-8">
                    <div
                        class="digit-container relative h-16 w-12 mx-1 bg-gray-200 rounded-md overflow-hidden"
                    >
                        <div
                            class="digit-roll absolute w-full transition-transform duration-100"
                            id="digit-1"
                        >
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                0
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                1
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                2
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                3
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                4
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                5
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                6
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                7
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                8
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                9
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                0
                            </div>
                        </div>
                    </div>
                    <div
                        class="digit-container relative h-16 w-12 mx-1 bg-gray-200 rounded-md overflow-hidden"
                    >
                        <div
                            class="digit-roll absolute w-full transition-transform duration-100"
                            id="digit-2"
                        >
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                0
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                1
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                2
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                3
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                4
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                5
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                6
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                7
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                8
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                9
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                0
                            </div>
                        </div>
                    </div>
                    <div
                        class="digit-container relative h-16 w-12 mx-1 bg-gray-200 rounded-md overflow-hidden"
                    >
                        <div
                            class="digit-roll absolute w-full transition-transform duration-100"
                            id="digit-3"
                        >
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                0
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                1
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                2
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                3
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                4
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                5
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                6
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                7
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                8
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                9
                            </div>
                            <div
                                class="digit text-4xl font-mono text-center h-16 leading-16"
                            >
                                0
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-center">
                    <button
                        id="generate-btn"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full transition-colors duration-300"
                    >
                        Generate
                    </button>
                </div>

                <div class="mt-6 text-center">
                    <p class="text-gray-600">
                        Last number:
                        <span id="last-number" class="font-bold">---</span>
                    </p>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const generateBtn = document.getElementById("generate-btn");
                const digit1 = document.getElementById("digit-1");
                const digit2 = document.getElementById("digit-2");
                const digit3 = document.getElementById("digit-3");
                const lastNumberDisplay =
                    document.getElementById("last-number");

                let isGenerating = false;
                let lastNumber = null;

                generateBtn.addEventListener("click", function () {
                    if (isGenerating) return;

                    isGenerating = true;
                    generateBtn.disabled = true;
                    generateBtn.classList.add(
                        "opacity-50",
                        "cursor-not-allowed"
                    );

                    // Generate a random 3-digit number
                    const targetNumber = Math.floor(Math.random() * 900) + 100;
                    const digits = targetNumber.toString().split("");

                    // Reset positions
                    digit1.style.transform = "translateY(0)";
                    digit2.style.transform = "translateY(0)";
                    digit3.style.transform = "translateY(0)";

                    // Animate each digit
                    animateDigit(digit1, parseInt(digits[0]), () => {
                        animateDigit(digit2, parseInt(digits[1]), () => {
                            animateDigit(digit3, parseInt(digits[2]), () => {
                                // Animation complete
                                isGenerating = false;
                                generateBtn.disabled = false;
                                generateBtn.classList.remove(
                                    "opacity-50",
                                    "cursor-not-allowed"
                                );
                                lastNumber = targetNumber;
                                lastNumberDisplay.textContent = targetNumber;
                            });
                        });
                    });
                });

                function animateDigit(element, targetDigit, callback) {
                    const duration = 1500; // 1.5 seconds
                    const startTime = performance.now();
                    const startPosition = 0;
                    // Each digit is 4rem tall (64px), but we're using translateY which uses element height
                    // Since each digit is 16 units (h-16), we multiply by 16
                    const endPosition = -(targetDigit * 64); // 64px per digit

                    function updateAnimation(currentTime) {
                        const elapsedTime = currentTime - startTime;
                        const progress = Math.min(elapsedTime / duration, 1);

                        // Ease-out function for smoother deceleration
                        const easedProgress = 1 - Math.pow(1 - progress, 3);

                        // Add some randomness to the position for a more mechanical feel
                        const randomOffset =
                            Math.sin(progress * Math.PI * 10) *
                            5 *
                            (1 - progress);
                        const currentPosition =
                            startPosition +
                            (endPosition - startPosition) * easedProgress +
                            randomOffset;

                        element.style.transform = `translateY(${currentPosition}px)`;

                        if (progress < 1) {
                            requestAnimationFrame(updateAnimation);
                        } else {
                            // Snap to final position
                            element.style.transform = `translateY(${endPosition}px)`;
                            if (callback) callback();
                        }
                    }

                    requestAnimationFrame(updateAnimation);
                }
            });
        </script>
    </body>
</html>
